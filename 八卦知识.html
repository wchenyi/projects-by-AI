<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰∏≠ÂõΩÂÖ´Âç¶Áü•ËØÜÂ≠¶‰π†ÁΩëÁ´ô</title>
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoi5Lit5Zu95YWr5Y2b55+l6K+G5a2m5Lmg572R56uZIiwic2hvcnRfbmFtZSI6IuWFq+WNm+egtSIsImljb25zIjpbeyJzcmMiOiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSFpwWlhkQ2IzZzlJakFnTUNBMU1pQTFNaUkrUEhKbFkzUWdlRDBpTVNJZ2VUMGlNVElpSUhkcFpIUm9QU0kxTUNJZ2FHVnBaMmgwUFNJME1DSWdabWxzYkQwaUl6WTNNVEE0T1NJZ2NuZzlJalVpTHo0OGRHVjRkQ0I0UFNJeU5pSWdlVDBpTXpVaUlHWnBiR3c5SWlOQlJqQkJSakFpSUdadmJuUXRjMmw2WlQwaU1qUWlQaUE0T0Nrd1BDOTBaWGgwUGp3dmMzWm5QZz09Iiwic2l6ZXMiOiI1Mng1MiIsInR5cGUiOiJpbWFnZS9zdmcreG1sIn1dLCJ0aGVtZV9jb2xvciI6IiM2NzUwQTQiLCJiYWNrZ3JvdW5kX2NvbG9yIjoiI0ZFRjdGRiIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwic3RhcnRfdXJsIjoiLyJ9">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MiA1MiI+PHJlY3QgeD0iMSIgeT0iMTIiIHdpZHRoPSI1MCIgaGVpZ2h0PSI0MCIgZmlsbD0iIzY3MTA4OSIgcng9IjUiLz48dGV4dCB4PSIyNiIgeT0iMzUiIGZpbGw9IiNBRjBBRjAiIGZvbnQtc2l6ZT0iMjQiPiDljKY8L3RleHQ+PC9zdmc+">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6750A4;
            --on-primary: #FFFFFF;
            --primary-container: #EADDFF;
            --on-primary-container: #21005D;
            --secondary: #625B71;
            --surface: #FEF7FF;
            --on-surface: #1D1B20;
            --surface-variant: #E7E0EC;
            --on-surface-variant: #49454F;
            --outline: #79747E;
            --surface-container: #F3EDF7;
            --surface-container-high: #ECE6F0;
            --wood: #2D5016;
            --fire: #D32F2F;
            --earth: #F57C00;
            --metal: #FFD700;
            --water: #1976D2;
        }

        [data-theme="dark"] {
            --primary: #D0BCFF;
            --on-primary: #381E72;
            --primary-container: #4F378B;
            --on-primary-container: #EADDFF;
            --surface: #141218;
            --on-surface: #E6E0E9;
            --surface-variant: #49454F;
            --on-surface-variant: #CAC4D0;
            --outline: #938F99;
            --surface-container: #211F26;
            --surface-container-high: #2B2930;
            --wood: #4CAF50;
            --fire: #FF5252;
            --earth: #FF9800;
        }

        body {
            font-family: 'Roboto', 'Noto Sans SC', sans-serif;
            background-color: var(--surface);
            color: var(--on-surface);
            transition: all 0.3s;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 16px;
        }

        header {
            background-color: var(--surface-container);
            padding: 12px 16px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        h1 {
            font-size: 18px;
            font-weight: 500;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        h1::before {
            content: '‚òØ';
            font-size: 24px;
        }

        @media (min-width: 768px) {
            h1 { font-size: 28px; }
            .container { padding: 24px; }
        }

        .theme-toggle {
            background-color: var(--primary-container);
            color: var(--on-primary-container);
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }

        .card {
            background-color: var(--surface-container-high);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 500;
        }

        .collapse-btn {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 24px;
            padding: 4px;
        }

        @media (min-width: 768px) {
            .collapse-btn { display: none; }
        }

        .collapsible {
            max-height: 1000px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .collapsible.collapsed {
            max-height: 0;
        }

        @media (min-width: 768px) {
            .collapsible.collapsed {
                max-height: 1000px;
            }
        }

        .bagua-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        @media (min-width: 480px) {
            .bagua-selector { grid-template-columns: repeat(4, 1fr); }
        }

        @media (min-width: 768px) {
            .bagua-selector { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); }
        }

        .bagua-item {
            background-color: var(--surface-container);
            border: 2px solid var(--outline);
            border-radius: 12px;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .bagua-item:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .bagua-item.selected {
            background-color: var(--primary-container);
            border-color: var(--primary);
        }

        .bagua-item canvas {
            width: 100%;
            max-width: 80px;
            height: auto;
        }

        .bagua-name {
            font-size: 16px;
            font-weight: 500;
            margin-top: 8px;
        }

        .result-section {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
        }

        @media (min-width: 1024px) {
            .result-section { grid-template-columns: 1fr 1.5fr; gap: 24px; }
        }

        .hexagram-display {
            text-align: center;
        }

        #hexagramCanvas {
            max-width: 100%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .tabs {
            display: flex;
            gap: 4px;
            margin-bottom: 16px;
            border-bottom: 2px solid var(--outline);
            overflow-x: auto;
        }

        .tab {
            padding: 8px 12px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: var(--on-surface-variant);
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
            white-space: nowrap;
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .info-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        @media (min-width: 600px) {
            .info-grid { grid-template-columns: repeat(2, 1fr); }
        }

        .info-card {
            background-color: var(--surface-container);
            padding: 12px;
            border-radius: 8px;
        }

        .info-label {
            font-size: 12px;
            color: var(--on-surface-variant);
            margin-bottom: 4px;
        }

        .info-value {
            font-size: 16px;
            font-weight: 500;
        }

        .description {
            padding: 16px;
            background-color: var(--surface-container);
            border-radius: 12px;
            line-height: 1.8;
            margin-top: 16px;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        @media (min-width: 768px) {
            .settings-grid { grid-template-columns: repeat(2, 1fr); }
        }

        .setting-item {
            background-color: var(--surface-container);
            padding: 12px;
            border-radius: 8px;
        }

        .setting-item label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .button {
            background-color: var(--primary);
            color: var(--on-primary);
            border: none;
            padding: 12px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
            margin-top: 16px;
            flex-wrap: wrap;
        }

        .element-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            margin: 2px;
        }

        .element-wood { background-color: var(--wood); color: white; }
        .element-fire { background-color: var(--fire); color: white; }
        .element-earth { background-color: var(--earth); color: white; }
        .element-metal { background-color: var(--metal); color: black; }
        .element-water { background-color: var(--water); color: white; }

        canvas {
            display: block;
            margin: 20px auto;
        }

        .tiangan-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 12px;
            margin: 16px 0;
        }

        .tiangan-item {
            background-color: var(--surface-container);
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
        }

        .position-label {
            display: inline-block;
            background-color: var(--primary-container);
            color: var(--on-primary-container);
            padding: 4px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 500;
            margin-bottom: 12px;
        }

        .bagua-diagram {
            max-width: 400px;
            margin: 20px auto;
        }

        .warning-text {
            color: var(--on-surface-variant);
            font-size: 12px;
            font-style: italic;
            margin-top: 4px;
        }

        input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        input[type="color"] {
            width: 60px;
            height: 40px;
            border: 2px solid var(--outline);
            border-radius: 8px;
            cursor: pointer;
        }

        select {
            padding: 8px 12px;
            border-radius: 8px;
            border: 2px solid var(--outline);
            background-color: var(--surface-container);
            color: var(--on-surface);
            font-size: 14px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <header>
        <h1>ÂÖ´Âç¶Áü•ËØÜ</h1>
        <button class="theme-toggle" onclick="window.app.toggleTheme()">üåì</button>
    </header>

    <div class="container">
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">ÈÄâÊã©‰∏äÂç¶ÔºàÂ§ñÂç¶Ôºâ</h2>
                <button class="collapse-btn" onclick="window.app.toggleCollapse('upper')">‚ñº</button>
            </div>
            <div class="position-label">‰∏äÂç¶</div>
            <div class="collapsible" id="upperCollapse">
                <div class="bagua-selector" id="upperBagua"></div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h2 class="card-title">ÈÄâÊã©‰∏ãÂç¶ÔºàÂÜÖÂç¶Ôºâ</h2>
                <button class="collapse-btn" onclick="window.app.toggleCollapse('lower')">‚ñº</button>
            </div>
            <div class="position-label">‰∏ãÂç¶</div>
            <div class="collapsible" id="lowerCollapse">
                <div class="bagua-selector" id="lowerBagua"></div>
            </div>
        </div>

        <div class="card" id="resultCard" style="display: none;">
            <h2 class="card-title">Âç¶Ë±°ÁªìÊûú</h2>
            
            <div class="tabs">
                <button class="tab active" onclick="window.app.switchTab('basic')">Âü∫Êú¨‰ø°ÊÅØ</button>
                <button class="tab" onclick="window.app.switchTab('wuxing')">‰∫îË°åÂ±ûÊÄß</button>
                <button class="tab" onclick="window.app.switchTab('tiangan')">Â§©Âπ≤Âú∞ÊîØ</button>
                <button class="tab" onclick="window.app.switchTab('download')">‰∏ãËΩΩËÆæÁΩÆ</button>
            </div>

            <div class="result-section">
                <div class="hexagram-display">
                    <canvas id="hexagramCanvas" width="400" height="600"></canvas>
                    <div class="action-buttons">
                        <button class="button" onclick="window.app.updateHexagram()">üîÑ Êõ¥Êñ∞</button>
                        <button class="button" onclick="window.app.downloadHexagram()">‚¨áÔ∏è ‰∏ãËΩΩ</button>
                    </div>
                </div>

                <div>
                    <div id="tabBasic" class="tab-content active">
                        <div class="info-grid" id="basicInfo"></div>
                        <div class="description" id="hexagramDesc"></div>
                    </div>

                    <div id="tabWuxing" class="tab-content">
                        <div class="info-grid" id="wuxingInfo"></div>
                        <canvas id="wuxingCanvas" width="500" height="500"></canvas>
                        <canvas id="changshengCanvas" width="700" height="300"></canvas>
                    </div>

                    <div id="tabTiangan" class="tab-content">
                        <h3 style="margin-bottom: 12px;">Â§©Âπ≤Âú∞ÊîØÁü•ËØÜ</h3>
                        <div id="tianganContent"></div>
                    </div>

                    <div id="tabDownload" class="tab-content">
                        <h3 style="margin-bottom: 12px;">‰∏ãËΩΩÈÄâÈ°π</h3>
                        <div class="settings-grid" id="downloadSettings"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="data:text/javascript;base64,"></script>
    <script>
// ÂÖ´Âç¶Êï∞ÊçÆÈÖçÁΩÆ
const BAGUA_CONFIG = {
    '‰πæ‚ò∞': {
        lines: [1, 1, 1],
        nature: 'Â§©',
        wuxing: 'Èáë',
        dizhiLower: ['Ëæ∞', 'ÂØÖ', 'Â≠ê'],
        dizhiUpper: ['Êàå', 'Áî≥', 'Âçà'],
        meaning: '‰πæ‰∏∫Â§©ÔºåÁ∫ØÈò≥‰πãÂç¶„ÄÇË±°ÂæÅÂàöÂÅ•„ÄÅËá™Âº∫‰∏çÊÅØÁöÑÁ≤æÁ•û„ÄÇ‰πæÂç¶‰ª£Ë°®Â§©ÈÅìËøêË°åÔºåÂàöÂÅ•‰∏≠Ê≠£Ôºå‰∏áÁâ©‰πãÁà∂„ÄÇ‰∏ªÂàõÈÄ†„ÄÅÈ¢ÜÂØº„ÄÅÁßØÊûÅËøõÂèñ„ÄÇÂêõÂ≠êËßÇÊ≠§Âç¶Ë±°ÔºåÂΩìÊïàÊ≥ïÂ§©ÈÅìÔºåËá™Âº∫‰∏çÊÅØ„ÄÇ',
        xiantian: 'Âçó',
        houtian: 'Ë•øÂåó'
    },
    'Âù§‚ò∑': {
        lines: [0, 0, 0],
        nature: 'Âú∞',
        wuxing: 'Âúü',
        dizhiLower: ['ÂçØ', 'Â∑≥', 'Êú™'],
        dizhiUpper: ['ÈÖâ', '‰∫•', '‰∏ë'],
        meaning: 'Âù§‰∏∫Âú∞ÔºåÁ∫ØÈò¥‰πãÂç¶„ÄÇË±°ÂæÅÊüîÈ°∫„ÄÅÂéöÂæ∑ËΩΩÁâ©ÁöÑÂìÅË¥®„ÄÇÂù§Âç¶‰ª£Ë°®Â§ßÂú∞ÊâøËΩΩÔºåÊüîÈ°∫ÂåÖÂÆπÔºå‰∏áÁâ©‰πãÊØç„ÄÇ‰∏ªÂåÖÂÆπ„ÄÅÂÖªËÇ≤„ÄÅÈ°∫‰ªéËá™ÁÑ∂„ÄÇÂêõÂ≠êËßÇÊ≠§Âç¶Ë±°ÔºåÂΩìÊïàÊ≥ïÂú∞ÈÅìÔºåÂéöÂæ∑ËΩΩÁâ©„ÄÇ',
        xiantian: 'Âåó',
        houtian: 'Ë•øÂçó'
    },
    'Èúá‚ò≥': {
        lines: [0, 0, 1],
        nature: 'Èõ∑',
        wuxing: 'Êú®',
        dizhiLower: ['Ëæ∞', 'ÂØÖ', 'Â≠ê'],
        dizhiUpper: ['Êàå', 'Áî≥', 'Âçà'],
        meaning: 'Èúá‰∏∫Èõ∑Ôºå‰∏ÄÈò≥Âä®‰∫é‰∏ã„ÄÇË±°ÂæÅÈúáÂä®„ÄÅÂ•ãËµ∑„ÄÅÂãáÂæÄÁõ¥Ââç„ÄÇÈúáÂç¶‰ª£Ë°®Êò•Èõ∑ÊÉäËõ∞Ôºå‰∏áÁâ©Â§çËãèÔºåÁîüÊú∫ÂãÉÂèë„ÄÇ‰∏ªÈúáÂä®„ÄÅÂêØÂèë„ÄÅÊûúÊñ≠Ë°åÂä®„ÄÇÂêõÂ≠êËßÇÊ≠§Âç¶Ë±°ÔºåÂ∫îÊÅêÊÉß‰øÆË∫´ÔºåË∞®Ë®ÄÊÖéË°å„ÄÇ',
        xiantian: '‰∏úÂåó',
        houtian: '‰∏ú'
    },
    'Â∑Ω‚ò¥': {
        lines: [1, 1, 0],
        nature: 'È£é',
        wuxing: 'Êú®',
        dizhiLower: ['ÈÖâ', '‰∫•', '‰∏ë'],
        dizhiUpper: ['ÂçØ', 'Â∑≥', 'Êú™'],
        meaning: 'Â∑Ω‰∏∫È£éÔºå‰∏ÄÈò¥ÂÖ•‰∫é‰∏ã„ÄÇË±°ÂæÅÂ∑ΩÈ°∫„ÄÅË∞¶ÈÄä„ÄÅÊ∏óÈÄè„ÄÇÂ∑ΩÂç¶‰ª£Ë°®È£éË°åÂ§©‰∏ãÔºåÊó†Â≠î‰∏çÂÖ•ÔºåÊüîËÄåËÉΩÂàö„ÄÇ‰∏ªÈ°∫‰ªé„ÄÅÊ∏êËøõ„ÄÅÁÅµÊ¥ªÂèòÈÄö„ÄÇÂêõÂ≠êËßÇÊ≠§Âç¶Ë±°ÔºåÂΩìÁî≥ÂëΩË°å‰∫ãÔºåÈöèÈ£éËÄåÂåñ„ÄÇ',
        xiantian: 'Ë•øÂçó',
        houtian: '‰∏úÂçó'
    },
    'Âùé‚òµ': {
        lines: [0, 1, 0],
        nature: 'Ê∞¥',
        wuxing: 'Ê∞¥',
        dizhiLower: ['Âçà', 'Ëæ∞', 'ÂØÖ'],
        dizhiUpper: ['Â≠ê', 'Êàå', 'Áî≥'],
        meaning: 'Âùé‰∏∫Ê∞¥ÔºåÈáçÈô©Áõ∏Âè†„ÄÇË±°ÂæÅÈô©Èô∑„ÄÅÊô∫ÊÖß„ÄÅÊµÅÂä®„ÄÇÂùéÂç¶‰ª£Ë°®Ê∞¥ÊµÅ‰∏çÊÅØÔºåÈô∑ËÄå‰∏çÊ≠¢ÔºåÂàö‰∏≠‰πãÂæ∑„ÄÇ‰∏ªÈô©Èöæ„ÄÅÊô∫Ë∞ã„ÄÅÂùöÊåÅ‰∏çÊáà„ÄÇÂêõÂ≠êËßÇÊ≠§Âç¶Ë±°ÔºåÂΩìË°åÊúâÂ∏∏Âæ∑Ôºå‰π†Êïô‰∏çÂÄ¶„ÄÇ',
        xiantian: 'Ë•ø',
        houtian: 'Âåó'
    },
    'Á¶ª‚ò≤': {
        lines: [1, 0, 1],
        nature: 'ÁÅ´',
        wuxing: 'ÁÅ´',
        dizhiLower: ['‰∫•', '‰∏ë', 'ÂçØ'],
        dizhiUpper: ['Â∑≥', 'Êú™', 'ÈÖâ'],
        meaning: 'Á¶ª‰∏∫ÁÅ´ÔºåÂ§ñÂàöÂÜÖÊüî„ÄÇË±°ÂæÅÂÖâÊòé„ÄÅÈôÑ‰∏Ω„ÄÅÊñáÊòé„ÄÇÁ¶ªÂç¶‰ª£Ë°®Êó•Êúà‰∏ΩÂ§©ÔºåÂÖâÊòéÊôÆÁÖßÔºåÊñáÊòé‰πãË±°„ÄÇ‰∏ªÂÖâÊòé„ÄÅÁæé‰∏Ω„ÄÅ‰æùÈôÑ„ÄÇÂêõÂ≠êËßÇÊ≠§Âç¶Ë±°ÔºåÂΩìÁªßÊòéÁÖß‰∫éÂõõÊñπÔºåÂåñËÇ≤‰∏áÁâ©„ÄÇ',
        xiantian: '‰∏ú',
        houtian: 'Âçó'
    },
    'ËâÆ‚ò∂': {
        lines: [1, 0, 0],
        nature: 'Â±±',
        wuxing: 'Âúü',
        dizhiLower: ['Áî≥', 'Âçà', 'Ëæ∞'],
        dizhiUpper: ['ÂØÖ', 'Â≠ê', 'Êàå'],
        meaning: 'ËâÆ‰∏∫Â±±ÔºåÊ≠¢ËÄå‰∏çÂä®„ÄÇË±°ÂæÅÈùôÊ≠¢„ÄÅÁ®≥Èáç„ÄÅÂÆàÊ≠¢„ÄÇËâÆÂç¶‰ª£Ë°®Â±±‰πãÁ®≥Âõ∫ÔºåÊ≠¢Ê¨≤‰øÆË∫´Ôºå‰∏çËΩª‰∏æÂ¶ÑÂä®„ÄÇ‰∏ªÈùôÊ≠¢„ÄÅÁ®≥ÂÆö„ÄÅÂÆ°Êó∂Â∫¶Âäø„ÄÇÂêõÂ≠êËßÇÊ≠§Âç¶Ë±°ÔºåÂΩìÊÄù‰∏çÂá∫ÂÖ∂‰ΩçÔºåÊÖéÁªàÂ¶ÇÂßã„ÄÇ',
        xiantian: 'Ë•øÂåó',
        houtian: '‰∏úÂåó'
    },
    'ÂÖë‚ò±': {
        lines: [0, 1, 1],
        nature: 'Ê≥Ω',
        wuxing: 'Èáë',
        dizhiLower: ['‰∏ë', 'ÂçØ', 'Â∑≥'],
        dizhiUpper: ['Êú™', 'ÈÖâ', '‰∫•'],
        meaning: 'ÂÖë‰∏∫Ê≥ΩÔºåÊüîÂú®‰∏äÂàöÂú®‰∏ã„ÄÇË±°ÂæÅÂñúÊÇ¶„ÄÅÂíåËØ¥„ÄÅ‰∫§ÊµÅ„ÄÇÂÖëÂç¶‰ª£Ë°®Ê≥ΩÊ∞¥ÊªãÊ∂¶ÔºåÂíåÊÇ¶‰ª•Ë°åÔºåË®ÄËæûÈÄöËææ„ÄÇ‰∏ªÂñúÊÇ¶„ÄÅÂè£Êâç„ÄÅ‰∫∫ÈôÖ‰∫§ÂæÄ„ÄÇÂêõÂ≠êËßÇÊ≠§Âç¶Ë±°ÔºåÂΩìÊúãÂèãËÆ≤‰π†Ôºå‰ª•ÊÇ¶Ê∞ëÂøÉ„ÄÇ',
        xiantian: '‰∏úÂçó',
        houtian: 'Ë•ø'
    }
};

// 64Âç¶Êï∞ÊçÆ
const HEXAGRAM_DATA = {
    '111111': { name: '‰πæ‰∏∫Â§©', palace: '‰πæÂÆ´', world: 'ÂÖ´‰∏ñÂç¶', type: 'ÂÖ≠ÂÜ≤Âç¶', desc: '‰πæÂç¶Ë±°ÂæÅÁ∫ØÈò≥ÂàöÂÅ•ÔºåÂ§©Ë°åÂÅ•ÔºåÂêõÂ≠ê‰ª•Ëá™Âº∫‰∏çÊÅØ„ÄÇ‰ª£Ë°®ÂàõÈÄ†„ÄÅÈ¢ÜÂØº„ÄÅÁßØÊûÅËøõÂèñÁöÑÁ≤æÁ•û„ÄÇ' },
            '111110': { name: 'Â§©È£éÂß§', palace: '‰πæÂÆ´', world: '‰∏Ä‰∏ñÂç¶', type: '', desc: 'Âß§Âç¶Ë±°ÂæÅÁõ∏ÈÅáÔºå‰∏ÄÈò¥ÂßãÁîü„ÄÇÊèêÈÜíÈò≤ÂæÆÊùúÊ∏êÔºåÊ≥®ÊÑèÂ∞è‰∫∫„ÄÇ' },
            '111100': { name: 'Â§©Â±±ÈÅÅ', palace: '‰πæÂÆ´', world: '‰∫å‰∏ñÂç¶', type: '', desc: 'ÈÅÅÂç¶Ë±°ÂæÅÈÄÄÈÅøÔºåÂêõÂ≠ê‰ª•ËøúÂ∞è‰∫∫„ÄÇÊáÇÂæóËøõÈÄÄÔºå‰øùÂÖ®ÂÆûÂäõ„ÄÇ' },
            '111000': { name: 'Â§©Âú∞Âê¶', palace: '‰πæÂÆ´', world: '‰∏â‰∏ñÂç¶', type: '', desc: 'Âê¶Âç¶Ë±°ÂæÅÈó≠Â°û‰∏çÈÄöÔºåÂ§©Âú∞‰∏ç‰∫§„ÄÇÈúÄË¶ÅÂùöÂÆàÊ≠£ÈÅìÔºåÁ≠âÂæÖÊó∂Êú∫„ÄÇ' },
            '110000': { name: 'È£éÂú∞ËßÇ', palace: '‰πæÂÆ´', world: 'Âõõ‰∏ñÂç¶', type: '', desc: 'ËßÇÂç¶Ë±°ÂæÅËßÇÂØüÔºå‰∏ãËßÇËÄåÂåñ„ÄÇ‰ª•Ë∫´‰ΩúÂàôÔºåÊïôÂåñ‰ªñ‰∫∫„ÄÇ' },
            '100000': { name: 'Â±±Âú∞Ââ•', palace: '‰πæÂÆ´', world: '‰∫î‰∏ñÂç¶', type: '', desc: 'Ââ•Âç¶Ë±°ÂæÅÂâ•ËêΩÔºåÈò¥ÁõõÈò≥Ë°∞„ÄÇÈúÄË¶ÅÈ°∫Â∫îÊó∂ÂäøÔºå‰øùÂ≠òÂÆûÂäõ„ÄÇ' },
            '101000': { name: 'ÁÅ´Âú∞Êôã', palace: '‰πæÂÆ´', world: 'Ê∏∏È≠ÇÂç¶', type: '', desc: 'ÊôãÂç¶Ë±°ÂæÅ‰∏äËøõÔºåÊòéÂá∫Âú∞‰∏ä„ÄÇÂÖâÊòéÁ£äËêΩÔºå‰∏çÊñ≠ËøõÂèñ„ÄÇ' },
            '101111': { name: 'ÁÅ´Â§©Â§ßÊúâ', palace: '‰πæÂÆ´', world: 'ÂΩíÈ≠ÇÂç¶', type: '', desc: 'Â§ßÊúâÂç¶Ë±°ÂæÅÂ§ßÊúâÊî∂Ëé∑ÔºåÁÅ´Âú®Â§©‰∏ä„ÄÇÁõõÂ§ß‰∏∞Êî∂‰πãË±°„ÄÇ' },
            
            '000111': { name: 'Ê≥ΩÂ§©Â§¨', palace: 'ÂÖëÂÆ´', world: '‰∏Ä‰∏ñÂç¶', type: '', desc: 'Â§¨Âç¶Ë±°ÂæÅÂÜ≥Êñ≠ÔºåÂàöÂÜ≥Êüî‰πü„ÄÇÂΩìÊú∫Á´ãÊñ≠ÔºåÈô§ÊÅ∂Âä°Â∞Ω„ÄÇ' },
            '011111': { name: 'ÂÖë‰∏∫Ê≥Ω', palace: 'ÂÖëÂÆ´', world: 'ÂÖ´‰∏ñÂç¶', type: 'ÂÖ≠ÂÜ≤Âç¶', desc: 'ÂÖëÂç¶Ë±°ÂæÅÂñúÊÇ¶ÔºåÂíåÊÇ¶‰ª•Ë°å„ÄÇ‰ª•ÂñúÊÇ¶‰πãÂøÉÂæÖ‰∫∫Êé•Áâ©„ÄÇ' },
            '011110': { name: 'Ê≥ΩÊ∞¥Âõ∞', palace: 'ÂÖëÂÆ´', world: '‰∫å‰∏ñÂç¶', type: '', desc: 'Âõ∞Âç¶Ë±°ÂæÅÂõ∞Â¢ÉÔºåÊ≥ΩÊó†Ê∞¥„ÄÇÂ§ÑÂõ∞Â¢ÉÊó∂ÈúÄÂùöÂÆàÊ≠£ÈÅì„ÄÇ' },
            '011100': { name: 'Ê≥ΩÂú∞ËêÉ', palace: 'ÂÖëÂÆ´', world: '‰∏â‰∏ñÂç¶', type: '', desc: 'ËêÉÂç¶Ë±°ÂæÅËÅöÈõÜÔºåËÅöÂêà‰ª•Áõõ„ÄÇ‰ºó‰∫∫ËÅöÂêàÔºåÂäõÈáèÂº∫Â§ß„ÄÇ' },
            '010100': { name: 'Ê∞¥Âú∞ÊØî', palace: 'ÂÖëÂÆ´', world: 'Âõõ‰∏ñÂç¶', type: '', desc: 'ÊØîÂç¶Ë±°ÂæÅ‰∫≤ÂØÜÔºåÂú∞‰∏äÊúâÊ∞¥„ÄÇ‰∫≤ÂØÜÁõ∏Â§ÑÔºå‰∫íÂä©Âêà‰Ωú„ÄÇ' },
            '110100': { name: 'Ê∞¥Â±±Ëπá', palace: 'ÂÖëÂÆ´', world: '‰∫î‰∏ñÂç¶', type: '', desc: 'ËπáÂç¶Ë±°ÂæÅËâ∞ÈöæÔºåÂ±±‰∏äÊúâÊ∞¥„ÄÇÈÅáÂà∞Ëâ∞ÈöæÔºåÂèçÊ±ÇËØ∏Â∑±„ÄÇ' },
            '100100': { name: 'Âú∞Â±±Ë∞¶', palace: 'ÂÖëÂÆ´', world: 'Ê∏∏È≠ÇÂç¶', type: '', desc: 'Ë∞¶Âç¶Ë±°ÂæÅË∞¶ÈÄäÔºåÂú∞‰∏≠ÊúâÂ±±„ÄÇË∞¶ËôöË∞®ÊÖéÔºåÂèóÁõäÊó†Á©∑„ÄÇ' },
            '100111': { name: 'Âú∞Ê≥Ω‰∏¥', palace: 'ÂÖëÂÆ´', world: 'ÂΩíÈ≠ÇÂç¶', type: '', desc: '‰∏¥Âç¶Ë±°ÂæÅ‰∏¥ËøëÔºåÊ≥Ω‰∏äÊúâÂú∞„ÄÇ‰ª•Êüî‰∏¥ÂàöÔºåÊïôÊÄùÊó†Á©∑„ÄÇ' },

            '101101': { name: 'ÁÅ´Â±±ÊóÖ', palace: 'Á¶ªÂÆ´', world: '‰∏Ä‰∏ñÂç¶', type: '', desc: 'ÊóÖÂç¶Ë±°ÂæÅÊóÖË°åÔºåÂ±±‰∏äÊúâÁÅ´„ÄÇË°åÊóÖ‰πãÊó∂ÔºåÂ∞èÂøÉË∞®ÊÖé„ÄÇ' },
            '101011': { name: 'ÁÅ´È£éÈºé', palace: 'Á¶ªÂÆ´', world: '‰∫å‰∏ñÂç¶', type: '', desc: 'ÈºéÂç¶Ë±°ÂæÅÈù©Êñ∞Ôºå‰ª•Êú®Â∑ΩÁÅ´„ÄÇÂéªÊóßÁ´ãÊñ∞ÔºåÊîπÈù©ÂõæÂº∫„ÄÇ' },
            '101110': { name: 'ÁÅ´Ê∞¥Êú™Êµé', palace: 'Á¶ªÂÆ´', world: '‰∏â‰∏ñÂç¶', type: '', desc: 'Êú™ÊµéÂç¶Ë±°ÂæÅÊú™ÂÆåÊàêÔºåÁÅ´Âú®Ê∞¥‰∏ä„ÄÇ‰∫ãÊÉÖÊú™ÊàêÔºåÁªßÁª≠Âä™Âäõ„ÄÇ' },
            '100110': { name: 'Â±±Ê∞¥Ëíô', palace: 'Á¶ªÂÆ´', world: 'Âõõ‰∏ñÂç¶', type: '', desc: 'ËíôÂç¶Ë±°ÂæÅÂêØËíôÔºåÂ±±‰∏ãÂá∫Ê≥â„ÄÇÁ´•ËíôÂÖªÊ≠£ÔºåÊñΩ‰ª•ÊïôËÇ≤„ÄÇ' },
            '110110': { name: 'È£éÊ∞¥Ê∂£', palace: 'Á¶ªÂÆ´', world: '‰∫î‰∏ñÂç¶', type: '', desc: 'Ê∂£Âç¶Ë±°ÂæÅÊ∂£Êï£ÔºåÈ£éË°åÊ∞¥‰∏ä„ÄÇÈúÄË¶ÅÂáùËÅö‰∫∫ÂøÉÔºåÂõ¢Áªì‰∏ÄËá¥„ÄÇ' },
            '111110': { name: 'Â§©Ê∞¥ËÆº', palace: 'Á¶ªÂÆ´', world: 'Ê∏∏È≠ÇÂç¶', type: '', desc: 'ËÆºÂç¶Ë±°ÂæÅËØâËÆºÔºåÂ§©‰∏éÊ∞¥ËøùË°å„ÄÇ‰∫âËÆº‰πã‰∫ãÔºåÊÖé‰πãÂèàÊÖé„ÄÇ' },
            '111101': { name: 'Â§©ÁÅ´Âêå‰∫∫', palace: 'Á¶ªÂÆ´', world: 'ÂΩíÈ≠ÇÂç¶', type: '', desc: 'Âêå‰∫∫Âç¶Ë±°ÂæÅÂõ¢ÁªìÔºåÁÅ´Âú®Â§©‰∏ä„ÄÇ‰∏é‰∫∫ÂêåÂøÉÔºåÂíåÁù¶Áõ∏Â§Ñ„ÄÇ' },
            '101101': { name: 'Á¶ª‰∏∫ÁÅ´', palace: 'Á¶ªÂÆ´', world: 'ÂÖ´‰∏ñÂç¶', type: 'ÂÖ≠ÂÜ≤Âç¶', desc: 'Á¶ªÂç¶Ë±°ÂæÅÂÖâÊòéÔºåÊòé‰∏§‰Ωú„ÄÇÈôÑÁùÄ‰æùÈù†ÔºåÊñáÊòé‰πãË±°„ÄÇ' },

            '001001': { name: 'Èõ∑ÁÅ´‰∏∞', palace: 'ÈúáÂÆ´', world: '‰∏Ä‰∏ñÂç¶', type: '', desc: '‰∏∞Âç¶Ë±°ÂæÅ‰∏∞ÁõõÔºåÁîµÈó™Èõ∑È∏£„ÄÇÁõõÂ§ß‰∏∞Êª°ÔºåÂÆúÂÆàÊàê„ÄÇ' },
            '001011': { name: 'Èõ∑Âú∞Ë±´', palace: 'ÈúáÂÆ´', world: '‰∫å‰∏ñÂç¶', type: '', desc: 'Ë±´Âç¶Ë±°ÂæÅÂíå‰πêÔºåÈõ∑Âá∫Âú∞Â•ã„ÄÇÈ°∫Êó∂ËÄåÂä®ÔºåÂñúÊÇ¶ÈöèË°å„ÄÇ' },
            '001010': { name: 'Èõ∑Ê∞¥Ëß£', palace: 'ÈúáÂÆ´', world: '‰∏â‰∏ñÂç¶', type: '', desc: 'Ëß£Âç¶Ë±°ÂæÅËß£Èô§ÔºåÈõ∑Èõ®‰Ωú„ÄÇÂõ∞ÈöæËß£Èô§ÔºåÂåñÈô©‰∏∫Â§∑„ÄÇ' },
            '001110': { name: 'Èõ∑È£éÊÅí', palace: 'ÈúáÂÆ´', world: 'Âõõ‰∏ñÂç¶', type: '', desc: 'ÊÅíÂç¶Ë±°ÂæÅÊÅí‰πÖÔºåÈõ∑È£éÁõ∏‰∏é„ÄÇÊåÅ‰πã‰ª•ÊÅíÔºåÈïø‰πÖ‰∏çÂèò„ÄÇ' },
            '001100': { name: 'Âú∞È£éÂçá', palace: 'ÈúáÂÆ´', world: '‰∫î‰∏ñÂç¶', type: '', desc: 'ÂçáÂç¶Ë±°ÂæÅ‰∏äÂçáÔºåÂú∞‰∏≠ÁîüÊú®„ÄÇÊüîÈ°∫ËÄå‰∏äÔºåÊ∏êËøõ‰∏çÂ∑≤„ÄÇ' },
            '000100': { name: 'Ê∞¥È£é‰∫ï', palace: 'ÈúáÂÆ´', world: 'Ê∏∏È≠ÇÂç¶', type: '', desc: '‰∫ïÂç¶Ë±°ÂæÅÊ∞¥‰∫ïÔºåÊú®‰∏äÊúâÊ∞¥„ÄÇÊîπÈÇë‰∏çÊîπ‰∫ïÔºåÂÖªËÄå‰∏çÁ©∑„ÄÇ' },
            '010100': { name: 'Ê≥ΩÈ£éÂ§ßËøá', palace: 'ÈúáÂÆ´', world: 'ÂΩíÈ≠ÇÂç¶', type: '', desc: 'Â§ßËøáÂç¶Ë±°ÂæÅÂ§ßÁöÑËøáÂ∫¶ÔºåÊ≥ΩÁÅ≠Êú®„ÄÇÊ†ãÊ°°‰πãÂá∂ÔºåÈúÄË¶ÅÊîπÈù©„ÄÇ' },
            '001001': { name: 'Èúá‰∏∫Èõ∑', palace: 'ÈúáÂÆ´', world: 'ÂÖ´‰∏ñÂç¶', type: 'ÂÖ≠ÂÜ≤Âç¶', desc: 'ÈúáÂç¶Ë±°ÂæÅÈúáÂä®ÔºåÊ¥äÈõ∑Èúá„ÄÇÈúáÊÉäÁôæÈáåÔºå‰∏¥Âç±‰∏çÊÉß„ÄÇ' },

            '110110': { name: 'Â∑Ω‰∏∫È£é', palace: 'Â∑ΩÂÆ´', world: 'ÂÖ´‰∏ñÂç¶', type: 'ÂÖ≠ÂÜ≤Âç¶', desc: 'Â∑ΩÂç¶Ë±°ÂæÅÈ£éÔºåÈöèÈ£éÂ∑Ω„ÄÇÊüîÈ°∫Ë∞¶ÊÅ≠ÔºåÊ∏êËøõÊúâÂà©„ÄÇ' },
            '110111': { name: 'È£éÂ§©Â∞èÁïú', palace: 'Â∑ΩÂÆ´', world: '‰∏Ä‰∏ñÂç¶', type: '', desc: 'Â∞èÁïúÂç¶Ë±°ÂæÅÂ∞èÁöÑËìÑÁßØÔºåÈ£éË°åÂ§©‰∏ä„ÄÇÂØÜ‰∫ë‰∏çÈõ®ÔºåÈúÄË¶ÅÁßØÁ¥Ø„ÄÇ' },
            '110011': { name: 'È£éÁÅ´ÂÆ∂‰∫∫', palace: 'Â∑ΩÂÆ´', world: '‰∫å‰∏ñÂç¶', type: '', desc: 'ÂÆ∂‰∫∫Âç¶Ë±°ÂæÅÂÆ∂Â∫≠ÔºåÈ£éËá™ÁÅ´Âá∫„ÄÇÈΩêÂÆ∂‰πãÈÅìÔºåÁî±ÂÜÖÂèäÂ§ñ„ÄÇ' },
            '110001': { name: 'È£éÈõ∑Áõä', palace: 'Â∑ΩÂÆ´', world: '‰∏â‰∏ñÂç¶', type: '', desc: 'ÁõäÂç¶Ë±°ÂæÅÂ¢ûÁõäÔºåÈ£éÈõ∑Áõä„ÄÇÊçü‰∏äÁõä‰∏ãÔºåÂà©Áõä‰ºóÁîü„ÄÇ' },
            '111001': { name: 'Â§©Èõ∑Êó†Â¶Ñ', palace: 'Â∑ΩÂÆ´', world: 'Âõõ‰∏ñÂç¶', type: '', desc: 'Êó†Â¶ÑÂç¶Ë±°ÂæÅÊó†Â¶ÑÔºåÂ§©‰∏ãÈõ∑Ë°å„ÄÇÈ°∫Ëá™ÁÑ∂ËÄåË°åÔºå‰∏çÂ¶Ñ‰∏∫„ÄÇ' },
            '101001': { name: 'ÁÅ´Èõ∑Âô¨Âóë', palace: 'Â∑ΩÂÆ´', world: '‰∫î‰∏ñÂç¶', type: '', desc: 'Âô¨ÂóëÂç¶Ë±°ÂæÅÂí¨ÂêàÔºåÈõ∑ÁîµÂêàËÄåÁ´†„ÄÇÂàöÊüîÁõ∏ÊµéÔºåÊäòÁã±Êñ≠Âàë„ÄÇ' },
            '100001': { name: 'Â±±Èõ∑È¢ê', palace: 'Â∑ΩÂÆ´', world: 'Ê∏∏È≠ÇÂç¶', type: '', desc: 'È¢êÂç¶Ë±°ÂæÅÈ¢êÂÖªÔºåÂ±±‰∏ãÊúâÈõ∑„ÄÇÂÖªÁîü‰πãÈÅìÔºåÊÖéË®ÄËäÇÈ£ü„ÄÇ' },
            '100110': { name: 'Â±±È£éËõä', palace: 'Â∑ΩÂÆ´', world: 'ÂΩíÈ≠ÇÂç¶', type: '', desc: 'ËõäÂç¶Ë±°ÂæÅËõäÊÉëÔºåÂ±±‰∏ãÊúâÈ£é„ÄÇÈô§ÊóßÂ∏ÉÊñ∞ÔºåÊåØ‰ΩúÊúâ‰∏∫„ÄÇ' },

            '010010': { name: 'Âùé‰∏∫Ê∞¥', palace: 'ÂùéÂÆ´', world: 'ÂÖ´‰∏ñÂç¶', type: 'ÂÖ≠ÂÜ≤Âç¶', desc: 'ÂùéÂç¶Ë±°ÂæÅÈô©Èô∑ÔºåÊ∞¥Ê¥äËá≥„ÄÇ‰π†ÂùéÈáçÈô©ÔºåÈúÄË¶ÅÂùöÊåÅ„ÄÇ' },
            '010011': { name: 'Ê∞¥Ê≥ΩËäÇ', palace: 'ÂùéÂÆ´', world: '‰∏Ä‰∏ñÂç¶', type: '', desc: 'ËäÇÂç¶Ë±°ÂæÅËäÇÂà∂ÔºåÊ≥Ω‰∏äÊúâÊ∞¥„ÄÇÂà∂Â∫¶ÊúâËäÇÔºå‰∏çÂèØËøáÂ∫¶„ÄÇ' },
            '010001': { name: 'Ê∞¥Èõ∑Â±Ø', palace: 'ÂùéÂÆ´', world: '‰∫å‰∏ñÂç¶', type: '', desc: 'Â±ØÂç¶Ë±°ÂæÅËâ∞ÈöæÔºå‰∫ëÈõ∑Â±Ø„ÄÇËçâÂàõ‰πãÂàùÔºåÁªèËê•Ëâ∞Èöæ„ÄÇ' },
            '010101': { name: 'Ê∞¥ÁÅ´Êó¢Êµé', palace: 'ÂùéÂÆ´', world: '‰∏â‰∏ñÂç¶', type: '', desc: 'Êó¢ÊµéÂç¶Ë±°ÂæÅÊàêÂäüÔºåÊ∞¥Âú®ÁÅ´‰∏ä„ÄÇ‰∫ãÂ∑≤ÊàêÂ∞±ÔºåÈò≤Ê≠¢ÂÄæË¶Ü„ÄÇ' },
            '011101': { name: 'Ê≥ΩÁÅ´Èù©', palace: 'ÂùéÂÆ´', world: 'Âõõ‰∏ñÂç¶', type: '', desc: 'Èù©Âç¶Ë±°ÂæÅÂèòÈù©ÔºåÊ≥Ω‰∏≠ÊúâÁÅ´„ÄÇÈ°∫Â§©Â∫î‰∫∫ÔºåÊîπÈù©ÂèòÈÄö„ÄÇ' },
            '001101': { name: 'Èõ∑ÁÅ´‰∏∞', palace: 'ÂùéÂÆ´', world: '‰∫î‰∏ñÂç¶', type: '', desc: '‰∏∞Âç¶Ë±°ÂæÅÁõõÂ§ßÔºåÈõ∑ÁîµÁöÜËá≥„ÄÇÂÖâÊòéÊ≠£Â§ßÔºåÂøóÂæóÊÑèÊª°„ÄÇ' },
            '001010': { name: 'Âú∞ÁÅ´ÊòéÂ§∑', palace: 'ÂùéÂÆ´', world: 'Ê∏∏È≠ÇÂç¶', type: '', desc: 'ÊòéÂ§∑Âç¶Ë±°ÂæÅÊô¶ÊöóÔºåÊòéÂÖ•Âú∞‰∏≠„ÄÇÂ§ÑÂõ∞ÂÆàÊ≠£ÔºåÈü¨ÂÖâÂÖªÊô¶„ÄÇ' },
            '001110': { name: 'Âú∞Ê∞¥Â∏à', palace: 'ÂùéÂÆ´', world: 'ÂΩíÈ≠ÇÂç¶', type: '', desc: 'Â∏àÂç¶Ë±°ÂæÅÂÜõÊóÖÔºåÂú∞‰∏≠ÊúâÊ∞¥„ÄÇ‰ª•Ê≠£Áªü‰ºóÔºåÈô©‰∏≠Ê±ÇËÉú„ÄÇ' },

            '100100': { name: 'ËâÆ‰∏∫Â±±', palace: 'ËâÆÂÆ´', world: 'ÂÖ´‰∏ñÂç¶', type: 'ÂÖ≠ÂÜ≤Âç¶', desc: 'ËâÆÂç¶Ë±°ÂæÅÈùôÊ≠¢ÔºåÂÖºÂ±±ËâÆ„ÄÇÊ≠¢Ê¨≤‰øÆË∫´Ôºå‰∏çËΩª‰∏æÂ¶ÑÂä®„ÄÇ' },
            '100101': { name: 'Â±±ÁÅ´Ë¥≤', palace: 'ËâÆÂÆ´', world: '‰∏Ä‰∏ñÂç¶', type: '', desc: 'Ë¥≤Âç¶Ë±°ÂæÅÊñáÈ•∞ÔºåÂ±±‰∏ãÊúâÁÅ´„ÄÇÂàöÊüî‰∫§ÈîôÔºåÊñáË¥®ÂÖºÂ§á„ÄÇ' },
            '100111': { name: 'Â±±Â§©Â§ßÁïú', palace: 'ËâÆÂÆ´', world: '‰∫å‰∏ñÂç¶', type: '', desc: 'Â§ßÁïúÂç¶Ë±°ÂæÅÂ§ßÁöÑËìÑÁßØÔºåÂ§©Âú®Â±±‰∏≠„ÄÇËìÑÂÖªË¥§Âæ∑ÔºåÂÖÖÂÆûËá™Â∑±„ÄÇ' },
            '100011': { name: 'Â±±Ê≥ΩÊçü', palace: 'ËâÆÂÆ´', world: '‰∏â‰∏ñÂç¶', type: '', desc: 'ÊçüÂç¶Ë±°ÂæÅÂáèÊçüÔºåÂ±±‰∏ãÊúâÊ≥Ω„ÄÇÊçüÊúâ‰ΩôËÄåË°•‰∏çË∂≥ÔºåÂπ≥Ë°°‰πãÈÅì„ÄÇ' },
            '101011': { name: 'ÁÅ´Ê≥ΩÁùΩ', palace: 'ËâÆÂÆ´', world: 'Âõõ‰∏ñÂç¶', type: '', desc: 'ÁùΩÂç¶Ë±°ÂæÅ‰πñÁ¶ªÔºå‰∏äÁÅ´‰∏ãÊ≥Ω„ÄÇÊ±ÇÂêåÂ≠òÂºÇÔºåÂíåËÄå‰∏çÂêå„ÄÇ' },
            '111011': { name: 'Â§©Ê≥ΩÂ±•', palace: 'ËâÆÂÆ´', world: '‰∫î‰∏ñÂç¶', type: '', desc: 'Â±•Âç¶Ë±°ÂæÅË∑µÂ±•Ôºå‰∏äÂ§©‰∏ãÊ≥Ω„ÄÇ‰ª•ÊüîÂÖãÂàöÔºåË∞®ÊÖéËÄåË°å„ÄÇ' },
            '110011': { name: 'È£éÊ≥Ω‰∏≠Â≠ö', palace: 'ËâÆÂÆ´', world: 'Ê∏∏È≠ÇÂç¶', type: '', desc: '‰∏≠Â≠öÂç¶Ë±°ÂæÅËØö‰ø°ÔºåÊ≥Ω‰∏äÊúâÈ£é„ÄÇÂÜÖËØöÂ§ñ‰ø°ÔºåÊÑüÂåñ‰ªñ‰∫∫„ÄÇ' },
            '110100': { name: 'È£éÂ±±Ê∏ê', palace: 'ËâÆÂÆ´', world: 'ÂΩíÈ≠ÇÂç¶', type: '', desc: 'Ê∏êÂç¶Ë±°ÂæÅÊ∏êËøõÔºåÂ±±‰∏äÊúâÊú®„ÄÇÂ•≥ÂΩíÂêâÔºåÂæ™Â∫èÊ∏êËøõ„ÄÇ' },

            '000000': { name: 'Âù§‰∏∫Âú∞', palace: 'Âù§ÂÆ´', world: 'ÂÖ´‰∏ñÂç¶', type: 'ÂÖ≠ÂÜ≤Âç¶', desc: 'Âù§Âç¶Ë±°ÂæÅÂ§ßÂú∞ÔºåÂú∞ÂäøÂù§„ÄÇÊüîÈ°∫ËΩΩÁâ©ÔºåÂéöÂæ∑ÊâøËΩΩ„ÄÇ' },
            '000001': { name: 'Âú∞Èõ∑Â§ç', palace: 'Âù§ÂÆ´', world: '‰∏Ä‰∏ñÂç¶', type: '', desc: 'Â§çÂç¶Ë±°ÂæÅËøîÂõûÔºåÈõ∑Âú®Âú∞‰∏≠„ÄÇÂæ™ÁéØÂæÄÂ§çÔºåÂâ•ÊûÅÂøÖÂ§ç„ÄÇ' },
            '000011': { name: 'Âú∞Ê≥Ω‰∏¥', palace: 'Âù§ÂÆ´', world: '‰∫å‰∏ñÂç¶', type: '', desc: '‰∏¥Âç¶Ë±°ÂæÅ‰∏¥ËøëÔºåÂú∞‰∏äÊúâÊ≥Ω„ÄÇÊïôÊÄùÊó†Á©∑ÔºåÊÑüÂåñ‰∫éÊ∞ë„ÄÇ' },
            '000111': { name: 'Âú∞Â§©Ê≥∞', palace: 'Âù§ÂÆ´', world: '‰∏â‰∏ñÂç¶', type: '', desc: 'Ê≥∞Âç¶Ë±°ÂæÅÈÄöÊ≥∞ÔºåÂ§©Âú∞‰∫§Ê≥∞„ÄÇÂ∞èÂæÄÂ§ßÊù•ÔºåÂêâÁ••‰∫®ÈÄö„ÄÇ' },
            '001111': { name: 'Èõ∑Â§©Â§ßÂ£Æ', palace: 'Âù§ÂÆ´', world: 'Âõõ‰∏ñÂç¶', type: '', desc: 'Â§ßÂ£ÆÂç¶Ë±°ÂæÅÂ£ÆÁõõÔºåÈõ∑Âú®Â§©‰∏ä„ÄÇÂàöÂÅ•ÁõõÂ§ßÔºåÂãøÂ¶ÑË°åÂä®„ÄÇ' },
            '011111': { name: 'Ê≥ΩÂ§©Â§¨', palace: 'Âù§ÂÆ´', world: '‰∫î‰∏ñÂç¶', type: '', desc: 'Â§¨Âç¶Ë±°ÂæÅÂÜ≥Êñ≠ÔºåÊ≥Ω‰∏ä‰∫éÂ§©„ÄÇÂΩìÊñ≠ÂàôÊñ≠ÔºåÈô§ÊÅ∂Âä°Â∞Ω„ÄÇ' },
            '010111': { name: 'Ê∞¥Â§©ÈúÄ', palace: 'Âù§ÂÆ´', world: 'Ê∏∏È≠ÇÂç¶', type: '', desc: 'ÈúÄÂç¶Ë±°ÂæÅÁ≠âÂæÖÔºå‰∫ë‰∏ä‰∫éÂ§©„ÄÇÈúÄÊó∂ËÄåÂä®Ôºå ÂøÉÁ≠âÂæÖ„ÄÇ' },
            '010000': { name: 'Ê∞¥Âú∞ÊØî', palace: 'Âù§ÂÆ´', world: 'ÂΩíÈ≠ÇÂç¶', type: '', desc: 'ÊØîÂç¶Ë±°ÂæÅ‰∫≤ÊØîÔºåÂú∞‰∏äÊúâÊ∞¥„ÄÇÁõ∏ËæÖÁõ∏ÊàêÔºåÂêâÁ••ÂíåÈ°∫„ÄÇ' }
};

// Â§©Âπ≤Âú∞ÊîØÊï∞ÊçÆ
const TIANGAN_DATA = {
    tiangan: [
        { name: 'Áî≤', yinyang: 'Èò≥', wuxing: 'Êú®', body: 'ËÉÜ', color: '#2D5016' },
        { name: '‰πô', yinyang: 'Èò¥', wuxing: 'Êú®', body: 'ËÇù', color: '#2D5016' },
        { name: '‰∏ô', yinyang: 'Èò≥', wuxing: 'ÁÅ´', body: 'Â∞èËÇ†', color: '#D32F2F' },
        { name: '‰∏Å', yinyang: 'Èò¥', wuxing: 'ÁÅ´', body: 'ÂøÉ', color: '#D32F2F' },
        { name: 'Êàä', yinyang: 'Èò≥', wuxing: 'Âúü', body: 'ËÉÉ', color: '#F57C00' },
        { name: 'Â∑±', yinyang: 'Èò¥', wuxing: 'Âúü', body: 'ËÑæ', color: '#F57C00' },
        { name: 'Â∫ö', yinyang: 'Èò≥', wuxing: 'Èáë', body: 'Â§ßËÇ†', color: '#FFD700' },
        { name: 'Ëæõ', yinyang: 'Èò¥', wuxing: 'Èáë', body: 'ËÇ∫', color: '#FFD700' },
        { name: 'Â£¨', yinyang: 'Èò≥', wuxing: 'Ê∞¥', body: 'ËÜÄËÉ±„ÄÅ‰∏âÁÑ¶', color: '#1976D2' },
        { name: 'Áô∏', yinyang: 'Èò¥', wuxing: 'Ê∞¥', body: 'ËÇæ„ÄÅÂåÖÁªú', color: '#1976D2' }
    ],
    dizhi: [
        { name: 'Â≠ê', yinyang: 'Èò≥', wuxing: 'Ê∞¥', body: 'ËÜÄËÉ±„ÄÅÊ∞¥ÈÅì„ÄÅËÄ≥', color: '#1976D2', chong: 'Âçà', he: '‰∏ë', san: 'Áî≥Ëæ∞' },
        { name: '‰∏ë', yinyang: 'Èò¥', wuxing: 'Âúü', body: 'ËÉûËÇö„ÄÅËÑæ', color: '#F57C00', chong: 'Êú™', he: 'Â≠ê', san: 'Â∑≥ÈÖâ' },
        { name: 'ÂØÖ', yinyang: 'Èò≥', wuxing: 'Êú®', body: 'ËÉÜËÑâ„ÄÅ‰∏§Êâã', color: '#2D5016', chong: 'Áî≥', he: '‰∫•', san: 'ÂçàÊàå' },
        { name: 'ÂçØ', yinyang: 'Èò¥', wuxing: 'Êú®', body: 'ÂçÅÊåá„ÄÅËÇù', color: '#2D5016', chong: 'ÈÖâ', he: 'Êàå', san: '‰∫•Êú™' },
        { name: 'Ëæ∞', yinyang: 'Èò≥', wuxing: 'Âúü', body: 'ÁöÆËÇ§„ÄÅËÇ©ËÉ∏', color: '#F57C00', chong: 'Êàå', he: 'ÈÖâ', san: 'Áî≥Â≠ê' },
        { name: 'Â∑≥', yinyang: 'Èò¥', wuxing: 'ÁÅ´', body: 'Èù¢„ÄÅÂíΩÈΩø„ÄÅËÇõ', color: '#D32F2F', chong: '‰∫•', he: 'Áî≥', san: 'ÈÖâ‰∏ë' },
        { name: 'Âçà', yinyang: 'Èò≥', wuxing: 'ÁÅ´', body: 'Á≤æÁ•û„ÄÅÁúºÁõÆ', color: '#D32F2F', chong: 'Â≠ê', he: 'Êú™', san: 'ÂØÖÊàå' },
        { name: 'Êú™', yinyang: 'Èò¥', wuxing: 'Âúü', body: 'ËÉÉËÑò„ÄÅËÑäÊ¢Å', color: '#F57C00', chong: '‰∏ë', he: 'Âçà', san: 'ÂçØ‰∫•' },
        { name: 'Áî≥', yinyang: 'Èò≥', wuxing: 'Èáë', body: 'Â§ßËÇ†„ÄÅÁªèÁªú„ÄÅËÇ∫', color: '#FFD700', chong: 'ÂØÖ', he: 'Â∑≥', san: 'Â≠êËæ∞' },
        { name: 'ÈÖâ', yinyang: 'Èò¥', wuxing: 'Èáë', body: 'Á≤æË°Ä„ÄÅÂ∞èËÇ†', color: '#FFD700', chong: 'ÂçØ', he: 'Ëæ∞', san: 'Â∑≥‰∏ë' },
        { name: 'Êàå', yinyang: 'Èò≥', wuxing: 'Âúü', body: 'ÂëΩÈó®„ÄÅËÖøË∂≥', color: '#F57C00', chong: 'Ëæ∞', he: 'ÂçØ', san: 'ÂØÖÂçà' },
        { name: '‰∫•', yinyang: 'Èò¥', wuxing: 'Ê∞¥', body: 'Â§¥„ÄÅËÇæÂõä', color: '#1976D2', chong: 'Â∑≥', he: 'ÂØÖ', san: 'ÂçØÊú™' }
    ],
    gesong: {
        tiangan: 'Áî≤ËÉÜ‰πôËÇù‰∏ôÂ∞èËÇ†Ôºå‰∏ÅÂøÉÊàäËÉÉÂ∑±ËÑæ‰π°ÔºõÂ∫öÊòØÂ§ßËÇ†ËæõÂ±ûËÇ∫ÔºåÂ£¨Á≥ªËÜÄËÉ±Áô∏ËÇæËóèÔºõ‰∏âÁÑ¶‰∫¶ÂêëÂ£¨‰∏≠ÂØÑÔºåÂåÖÁªúÂêåÂΩíÂÖ•Áô∏‰π°„ÄÇ',
        dizhi: 'Â≠êÂ±ûËÜÄËÉ±Ê∞¥ÈÅìËÄ≥Ôºå‰∏ë‰∏∫ËÉûËÇöÂèäËÑæ‰π°ÔºõÂØÖËÉÜÂèëËÑâÂπ∂‰∏§ÊâãÔºåÂçØÊú®ÂçÅÊåáÂÜÖËÇùÊñπÔºõËæ∞Âúü‰∏∫ÁöÆËÇ©ËÉ∏Á±ªÔºåÂ∑≥Èù¢ÂíΩÈΩø‰∏ãÂ∞ªËÇõÔºõÂçàÁÅ´Á≤æÁ•ûÂè∏ÁúºÁõÆÔºåÊú™ÂúüËÉÉËÑòÈöîËÑäÊ¢ÅÔºõÁî≥ÈáëÂ§ßËÇ†ÁªèÁªúËÇ∫ÔºåÈÖâ‰∏≠Á≤æË°ÄÂ∞èËÇ†ËóèÔºõÊàåÂúüÂëΩÈó®ËÖøË∏ùË∂≥Ôºå‰∫•Ê∞¥‰∏∫Â§¥ÂèäËÇæÂõä„ÄÇ'
    }
};

// ÂÖ®Â±ÄÂ∫îÁî®ÂØπË±°
window.app = {
    selectedUpper: null,
    selectedLower: null,
    
    init() {
        this.initBaguaSelectors();
        this.initTheme();
    },
    
    initTheme() {
        const theme = 'light';
        document.documentElement.setAttribute('data-theme', theme);
    },
    
    toggleTheme() {
        const current = document.documentElement.getAttribute('data-theme');
        const newTheme = current === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', newTheme);
        if (this.selectedUpper && this.selectedLower) {
            this.drawHexagram();
            this.drawWuxingCircle();
            this.drawChangshengChart();
        }
    },
    
    toggleCollapse(type) {
        const id = type === 'upper' ? 'upperCollapse' : 'lowerCollapse';
        const el = document.getElementById(id);
        el.classList.toggle('collapsed');
    },
    
    switchTab(tabName) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        event.target.classList.add('active');
        document.getElementById('tab' + tabName.charAt(0).toUpperCase() + tabName.slice(1)).classList.add('active');
    },
    
    initBaguaSelectors() {
        const upperDiv = document.getElementById('upperBagua');
        const lowerDiv = document.getElementById('lowerBagua');
        
        Object.keys(BAGUA_CONFIG).forEach(name => {
            upperDiv.appendChild(this.createBaguaItem(name, 'upper'));
            lowerDiv.appendChild(this.createBaguaItem(name, 'lower'));
        });
    },
    
    createBaguaItem(name, position) {
        const item = document.createElement('div');
        item.className = 'bagua-item';
        
        const canvas = document.createElement('canvas');
        canvas.width = 100;
        canvas.height = 80;
        const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
        this.drawBagua(canvas, BAGUA_CONFIG[name].lines, isDark ? '#E6E0E9' : '#1D1B20');
        
        const nameDiv = document.createElement('div');
        nameDiv.className = 'bagua-name';
        nameDiv.textContent = name;
        
        const natureDiv = document.createElement('div');
        natureDiv.style.fontSize = '12px';
        natureDiv.style.color = 'var(--on-surface-variant)';
        natureDiv.textContent = BAGUA_CONFIG[name].nature;
        
        const wuxing = BAGUA_CONFIG[name].wuxing;
        const badge = document.createElement('div');
        badge.className = `element-badge element-${this.getWuxingClass(wuxing)}`;
        badge.textContent = wuxing;
        
        item.appendChild(canvas);
        item.appendChild(nameDiv);
        item.appendChild(natureDiv);
        item.appendChild(badge);
        
        item.onclick = () => this.selectBagua(name, position, item);
        
        return item;
    },
    
    selectBagua(name, position, element) {
        if (position === 'upper') {
            document.querySelectorAll('#upperBagua .bagua-item').forEach(el => el.classList.remove('selected'));
            this.selectedUpper = name;
        } else {
            document.querySelectorAll('#lowerBagua .bagua-item').forEach(el => el.classList.remove('selected'));
            this.selectedLower = name;
        }
        
        element.classList.add('selected');
        
        if (this.selectedUpper && this.selectedLower) {
            this.displayHexagram();
        }
    },
    
    drawBagua(canvas, lines, color) {
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;
        const lineHeight = height / 5;
        const lineWidth = width * 0.7;
        const startX = (width - lineWidth) / 2;
        const strokeWidth = height / 20;
        
        ctx.clearRect(0, 0, width, height);
        
        for (let i = 0; i < 3; i++) {
            const y = lineHeight * (i + 1);
            ctx.lineWidth = strokeWidth;
            ctx.lineCap = 'round';
            ctx.strokeStyle = color;
            
            if (lines[i] === 1) {
                ctx.beginPath();
                ctx.moveTo(startX, y);
                ctx.lineTo(startX + lineWidth, y);
                ctx.stroke();
            } else {
                const gap = lineWidth * 0.25;
                ctx.beginPath();
                ctx.moveTo(startX, y);
                ctx.lineTo(startX + (lineWidth - gap) / 2, y);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(startX + (lineWidth + gap) / 2, y);
                ctx.lineTo(startX + lineWidth, y);
                ctx.stroke();
            }
        }
    },
    
    displayHexagram() {
        document.getElementById('resultCard').style.display = 'block';
        document.getElementById('resultCard').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        
        this.drawHexagram();
        this.displayBasicInfo();
        this.displayWuxingInfo();
        this.displayTianganInfo();
        this.setupDownloadSettings();
        this.drawWuxingCircle();
        this.drawChangshengChart();
    },
    
    drawHexagram() {
        const canvas = document.getElementById('hexagramCanvas');
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;
        
        const transparentBg = document.getElementById('transparentBg')?.checked ?? true;
        const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
        
        if (!transparentBg) {
            ctx.fillStyle = isDark ? '#1E1E1E' : '#FFFFFF';
            ctx.fillRect(0, 0, width, height);
        } else {
            ctx.clearRect(0, 0, width, height);
        }
        
        const upperLines = BAGUA_CONFIG[this.selectedUpper].lines;
        const lowerLines = BAGUA_CONFIG[this.selectedLower].lines;
        const allLines = [...upperLines, ...lowerLines];
        
        const showWuxingColor = document.getElementById('showWuxingColor')?.checked ?? true;
        const showName = document.getElementById('showName')?.checked ?? true;
        const showType = document.getElementById('showType')?.checked ?? true;
        const showDizhi = document.getElementById('showDizhi')?.checked ?? true;
        
        const topMargin = 60;
        const bottomMargin = (showName || showType) ? 100 : 60;
        const availableHeight = height - topMargin - bottomMargin;
        const lineHeight = availableHeight / 7;
        const lineWidth = width * 0.5;
        const startX = (width - lineWidth) / 2;
        const strokeWidth = 8;
        
        let upperColor, lowerColor;
        if (showWuxingColor) {
            upperColor = this.getWuxingColor(BAGUA_CONFIG[this.selectedUpper].wuxing);
            lowerColor = this.getWuxingColor(BAGUA_CONFIG[this.selectedLower].wuxing);
        } else {
            upperColor = document.getElementById('upperColor')?.value ?? '#D32F2F';
            lowerColor = document.getElementById('lowerColor')?.value ?? '#2D5016';
        }
        
        const upperDizhi = BAGUA_CONFIG[this.selectedUpper].dizhiUpper;
        const lowerDizhi = BAGUA_CONFIG[this.selectedLower].dizhiLower;
        const allDizhi = [...upperDizhi, ...lowerDizhi];
        
        for (let i = 0; i < 6; i++) {
            const y = topMargin + lineHeight * (i + 1);
            ctx.lineWidth = strokeWidth;
            ctx.lineCap = 'round';
            
            const lineColor = i < 3 ? upperColor : lowerColor;
            
            if (allLines[i] === 1) {
                ctx.strokeStyle = lineColor;
                ctx.beginPath();
                ctx.moveTo(startX, y);
                ctx.lineTo(startX + lineWidth, y);
                ctx.stroke();
            } else {
                ctx.strokeStyle = lineColor;
                const gap = lineWidth * 0.3;
                ctx.beginPath();
                ctx.moveTo(startX, y);
                ctx.lineTo(startX + (lineWidth - gap) / 2, y);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(startX + (lineWidth + gap) / 2, y);
                ctx.lineTo(startX + lineWidth, y);
                ctx.stroke();
            }
            
            if (showDizhi) {
                const dizhi = allDizhi[i];
                const dizhiData = TIANGAN_DATA.dizhi.find(d => d.name === dizhi);
                const dizhiColor = showWuxingColor && dizhiData ? dizhiData.color : (isDark ? '#E6E0E9' : '#1D1B20');
                
                ctx.fillStyle = dizhiColor;
                ctx.font = 'bold 16px sans-serif';
                ctx.textAlign = 'left';
                ctx.fillText(dizhi, startX + lineWidth + 20, y + 6);
            }
        }
        
        ctx.fillStyle = isDark ? '#E6E0E9' : '#1D1B20';
        ctx.font = 'bold 16px sans-serif';
        ctx.textAlign = 'center';
        
        if (showName) {
            ctx.font = 'bold 24px sans-serif';
            const hexagramKey = allLines.join('');
            const hexagram = HEXAGRAM_DATA[hexagramKey];
            if (hexagram) {
                ctx.fillText(hexagram.name, width / 2, height - 50);
            }
        }
        
        if (showType) {
            ctx.font = '14px sans-serif';
            const hexagramKey = allLines.join('');
            const hexagram = HEXAGRAM_DATA[hexagramKey];
            if (hexagram && hexagram.type) {
                ctx.fillText(hexagram.type, width / 2, height - 25);
            }
        }
    },
    
    displayBasicInfo() {
        const upperLines = BAGUA_CONFIG[this.selectedUpper].lines;
        const lowerLines = BAGUA_CONFIG[this.selectedLower].lines;
        const hexagramKey = [...upperLines, ...lowerLines].join('');
        const hexagram = HEXAGRAM_DATA[hexagramKey] || { name: 'Êú™Êî∂ÂΩï', palace: '-', world: '-', type: '-', desc: 'Ê≠§Âç¶Ë±°Êï∞ÊçÆÊöÇÊú™Êî∂ÂΩï„ÄÇ' };
        
        const html = `
            <div class="info-card"><div class="info-label">Âç¶Âêç</div><div class="info-value">${hexagram.name}</div></div>
            <div class="info-card"><div class="info-label">Âç¶ÂÆ´</div><div class="info-value">${hexagram.palace}</div></div>
            <div class="info-card"><div class="info-label">‰∏ñÂ∫î</div><div class="info-value">${hexagram.world}</div></div>
            <div class="info-card"><div class="info-label">Âç¶Ë±°ÁâπÊÄß</div><div class="info-value">${hexagram.type || 'ÊôÆÈÄöÂç¶'}</div></div>
        `;
        
        document.getElementById('basicInfo').innerHTML = html;
        document.getElementById('hexagramDesc').innerHTML = `
            <h4 style="margin-bottom: 12px;">Âç¶Ë±°ËØ¶Ëß£</h4>
            <p style="margin-bottom: 12px;">${hexagram.desc}</p>
            <h4 style="margin: 16px 0 8px 0;">‰∏äÂç¶ - ${this.selectedUpper}</h4>
            <p style="margin-bottom: 12px;">${BAGUA_CONFIG[this.selectedUpper].meaning}</p>
            <h4 style="margin: 16px 0 8px 0;">‰∏ãÂç¶ - ${this.selectedLower}</h4>
            <p>${BAGUA_CONFIG[this.selectedLower].meaning}</p>
        `;
    },
    
    displayWuxingInfo() {
        const upperWuxing = BAGUA_CONFIG[this.selectedUpper].wuxing;
        const lowerWuxing = BAGUA_CONFIG[this.selectedLower].wuxing;
        const relation = this.getWuxingRelation(upperWuxing, lowerWuxing);
        
        const html = `
            <div class="info-card">
                <div class="info-label">‰∏äÂç¶‰∫îË°å</div>
                <div class="info-value"><span class="element-badge element-${this.getWuxingClass(upperWuxing)}">${upperWuxing}</span></div>
            </div>
            <div class="info-card">
                <div class="info-label">‰∏ãÂç¶‰∫îË°å</div>
                <div class="info-value"><span class="element-badge element-${this.getWuxingClass(lowerWuxing)}">${lowerWuxing}</span></div>
            </div>
            <div class="info-card">
                <div class="info-label">‰∫îË°åÂÖ≥Á≥ª</div>
                <div class="info-value">${relation}</div>
            </div>
        `;
        
        document.getElementById('wuxingInfo').innerHTML = html;
    },
    
    displayTianganInfo() {
        let html = '<h4 style="margin: 16px 0 12px 0;">Â§©Âπ≤Ê≠åËØÄ</h4>';
        html += `<div class="description" style="margin-bottom: 16px;">${TIANGAN_DATA.gesong.tiangan}</div>`;
        
        html += '<div class="tiangan-grid">';
        TIANGAN_DATA.tiangan.forEach(tg => {
            html += `
                <div class="tiangan-item" style="border-left-color: ${tg.color}">
                    <strong>${tg.name}</strong> - ${tg.yinyang} - ${tg.wuxing}<br>
                    <small>ÂØπÂ∫îË∫´‰ΩìÔºö${tg.body}</small>
                </div>
            `;
        });
        html += '</div>';
        
        html += '<h4 style="margin: 24px 0 12px 0;">Âú∞ÊîØÊ≠åËØÄ</h4>';
        html += `<div class="description" style="margin-bottom: 16px;">${TIANGAN_DATA.gesong.dizhi}</div>`;
        
        html += '<div class="tiangan-grid">';
        TIANGAN_DATA.dizhi.forEach(dz => {
            html += `
                <div class="tiangan-item" style="border-left-color: ${dz.color}">
                    <strong>${dz.name}</strong> - ${dz.yinyang} - ${dz.wuxing}<br>
                    <small>ÂØπÂ∫îË∫´‰ΩìÔºö${dz.body}</small><br>
                    <small>ÂÖ≠ÂÜ≤Ôºö${dz.chong}</small><br>
                    <small>ÂÖ≠ÂêàÔºö${dz.he}</small><br>
                    <small>‰∏âÂêàÔºö${dz.san}</small>
                </div>
            `;
        });
        html += '</div>';
        
        html += '<h4 style="margin: 24px 0 12px 0;">ÂÖàÂ§©ÂÖ´Âç¶Âõæ</h4>';
        html += '<canvas id="xiantianCanvas" class="bagua-diagram" width="400" height="400"></canvas>';
        
        html += '<h4 style="margin: 24px 0 12px 0;">ÂêéÂ§©ÂÖ´Âç¶Âõæ</h4>';
        html += '<canvas id="houtianCanvas" class="bagua-diagram" width="400" height="400"></canvas>';
        
        document.getElementById('tianganContent').innerHTML = html;
        
        setTimeout(() => {
            this.drawBaguaDiagram('xiantianCanvas', 'xiantian');
            this.drawBaguaDiagram('houtianCanvas', 'houtian');
        }, 100);
    },
    
    drawBaguaDiagram(canvasId, type) {
        const canvas = document.getElementById(canvasId);
        if (!canvas) return;
        
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;
        const centerX = width / 2;
        const centerY = height / 2;
        const radius = width / 3;
        
        ctx.clearRect(0, 0, width, height);
        
        const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
        const textColor = isDark ? '#E6E0E9' : '#1D1B20';
        
        const positions = type === 'xiantian' ? 
            { '‰πæ‚ò∞': 0, 'Â∑Ω‚ò¥': 45, 'Âùé‚òµ': 90, 'ËâÆ‚ò∂': 135, 'Âù§‚ò∑': 180, 'Èúá‚ò≥': 225, 'Á¶ª‚ò≤': 270, 'ÂÖë‚ò±': 315 } :
            { 'Á¶ª‚ò≤': 0, 'Âù§‚ò∑': 45, 'ÂÖë‚ò±': 90, '‰πæ‚ò∞': 135, 'Âùé‚òµ': 180, 'ËâÆ‚ò∂': 225, 'Èúá‚ò≥': 270, 'Â∑Ω‚ò¥': 315 };
        
        Object.keys(positions).forEach(name => {
            const angle = (positions[name] - 90) * Math.PI / 180;
            const x = centerX + radius * Math.cos(angle);
            const y = centerY + radius * Math.sin(angle);
            
            ctx.fillStyle = textColor;
            ctx.font = 'bold 18px sans-serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(name, x, y - 20);
            
            ctx.font = '14px sans-serif';
            ctx.fillText(BAGUA_CONFIG[name].nature, x, y);
            
            const wuxing = BAGUA_CONFIG[name].wuxing;
            ctx.fillStyle = this.getWuxingColor(wuxing);
            ctx.fillText(wuxing, x, y + 20);
            
            const dizhi = type === 'xiantian' ? BAGUA_CONFIG[name].dizhiLower : BAGUA_CONFIG[name].dizhiUpper;
            ctx.fillStyle = textColor;
            ctx.font = '12px sans-serif';
            ctx.fillText(dizhi.join(''), x, y + 35);
        });
        
        ctx.fillStyle = textColor;
        ctx.font = 'bold 16px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText(type === 'xiantian' ? 'ÂÖàÂ§©ÂÖ´Âç¶' : 'ÂêéÂ§©ÂÖ´Âç¶', centerX, centerY);
    },
    
    setupDownloadSettings() {
        const html = `
            <div class="setting-item">
                <label><input type="checkbox" id="showName" checked> ÊòæÁ§∫Âç¶Âêç</label>
            </div>
            <div class="setting-item">
                <label><input type="checkbox" id="showType" checked> ÊòæÁ§∫ÁâπÊÆäÁ±ªÂûã</label>
            </div>
            <div class="setting-item">
                <label><input type="checkbox" id="showDizhi" checked> ÊòæÁ§∫Âú∞ÊîØË£ÖÂç¶</label>
            </div>
            <div class="setting-item">
                <label><input type="checkbox" id="showXiangyi"> ÊòæÁ§∫Ë±°ÊÑè</label>
            </div>
            <div class="setting-item">
                <label><input type="checkbox" id="showXiantian"> ÊòæÁ§∫ÂÖàÂ§©‰ΩçÁΩÆ</label>
            </div>
            <div class="setting-item">
                <label><input type="checkbox" id="showHoutian"> ÊòæÁ§∫ÂêéÂ§©‰ΩçÁΩÆ</label>
            </div>
            <div class="setting-item">
                <label><input type="checkbox" id="showWuxingColor" checked onchange="window.app.toggleColorMode()"> ‰ΩøÁî®‰∫îË°åÈ¢úËâ≤</label>
                <div class="warning-text">ÂêØÁî®ÂêéÂ∞ÜË¶ÜÁõñËá™ÂÆö‰πâÈ¢úËâ≤</div>
            </div>
            <div class="setting-item">
                <label>‰∏äÂç¶È¢úËâ≤: <input type="color" id="upperColor" value="#D32F2F"></label>
                <div class="warning-text" id="upperColorWarning">‰∫îË°åÈ¢úËâ≤Ê®°ÂºèÂ∑≤ÂêØÁî®</div>
            </div>
            <div class="setting-item">
                <label>‰∏ãÂç¶È¢úËâ≤: <input type="color" id="lowerColor" value="#2D5016"></label>
                <div class="warning-text" id="lowerColorWarning">‰∫îË°åÈ¢úËâ≤Ê®°ÂºèÂ∑≤ÂêØÁî®</div>
            </div>
            <div class="setting-item">
                <label><input type="checkbox" id="transparentBg" checked> ËÉåÊôØÈÄèÊòé</label>
            </div>
            <div class="setting-item">
                <label>‰∏ãËΩΩÊ†ºÂºè:
                    <select id="downloadFormat">
                        <option value="png">PNG</option>
                        <option value="jpeg">JPEG</option>
                        <option value="webp">WebP</option>
                    </select>
                </label>
            </div>
        `;
        
        document.getElementById('downloadSettings').innerHTML = html;
        this.toggleColorMode();
    },
    
    toggleColorMode() {
        const useWuxing = document.getElementById('showWuxingColor')?.checked ?? true;
        const upperInput = document.getElementById('upperColor');
        const lowerInput = document.getElementById('lowerColor');
        const upperWarning = document.getElementById('upperColorWarning');
        const lowerWarning = document.getElementById('lowerColorWarning');
        
        if (upperInput) upperInput.disabled = useWuxing;
        if (lowerInput) lowerInput.disabled = useWuxing;
        if (upperWarning) upperWarning.style.display = useWuxing ? 'block' : 'none';
        if (lowerWarning) lowerWarning.style.display = useWuxing ? 'block' : 'none';
    },
    
    drawWuxingCircle() {
        const canvas = document.getElementById('wuxingCanvas');
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;
        const centerX = width / 2;
        const centerY = height / 2;
        const radius = Math.min(width, height) / 3;
        
        ctx.clearRect(0, 0, width, height);
        
        const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
        const textColor = isDark ? '#E6E0E9' : '#1D1B20';
        
        const elements = [
            { name: 'Êú®', angle: -90, color: isDark ? '#4CAF50' : '#2D5016' },
            { name: 'ÁÅ´', angle: -18, color: isDark ? '#FF5252' : '#D32F2F' },
            { name: 'Âúü', angle: 54, color: isDark ? '#FF9800' : '#F57C00' },
            { name: 'Èáë', angle: 126, color: '#FFD700' },
            { name: 'Ê∞¥', angle: 198, color: isDark ? '#2196F3' : '#1976D2' }
        ];
        
        // Áõ∏ÁîüÂúÜÁéØ
        ctx.strokeStyle = 'rgba(128,128,128,0.3)';
        ctx.lineWidth = 2;
        ctx.setLineDash([5, 5]);
        ctx.beginPath();
        elements.forEach((el, i) => {
            const x = centerX + radius * Math.cos(el.angle * Math.PI / 180);
            const y = centerY + radius * Math.sin(el.angle * Math.PI / 180);
            if (i === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
        });
        ctx.closePath();
        ctx.stroke();
        ctx.setLineDash([]);
        
        // Áõ∏ÂÖã‰∫îËßíÊòü
        ctx.strokeStyle = 'rgba(128,128,128,0.3)';
        ctx.lineWidth = 1;
        [0, 2, 4, 1, 3, 0].forEach((idx, i) => {
            const el = elements[idx];
            const x = centerX + radius * Math.cos(el.angle * Math.PI / 180);
            const y = centerY + radius * Math.sin(el.angle * Math.PI / 180);
            if (i === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
        });
        ctx.stroke();
        
        // ‰∫îË°åÂúÜÂúà
        elements.forEach((el, idx) => {
            const x = centerX + radius * Math.cos(el.angle * Math.PI / 180);
            const y = centerY + radius * Math.sin(el.angle * Math.PI / 180);
            
            ctx.beginPath();
            ctx.arc(x, y, 35, 0, 2 * Math.PI);
            ctx.fillStyle = el.color;
            ctx.fill();
            
            ctx.fillStyle = el.name === 'Èáë' ? '#000' : '#FFF';
            ctx.font = 'bold 22px sans-serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(el.name, x, y);
            
            // Áõ∏ÁîüÊ†áÊ≥®
            const nextIdx = (idx + 1) % 5;
            const nextEl = elements[nextIdx];
            const nextX = centerX + radius * Math.cos(nextEl.angle * Math.PI / 180);
            const nextY = centerY + radius * Math.sin(nextEl.angle * Math.PI / 180);
            const midX = (x + nextX) / 2;
            const midY = (y + nextY) / 2;
            
            ctx.fillStyle = textColor;
            ctx.font = '12px sans-serif';
            ctx.fillText('Áîü‚Üí', midX, midY);
            
            // Áõ∏ÂÖãÊ†áÊ≥®
            const keIdx = (idx + 2) % 5;
            const keEl = elements[keIdx];
            const keX = centerX + radius * Math.cos(keEl.angle * Math.PI / 180);
            const keY = centerY + radius * Math.sin(keEl.angle * Math.PI / 180);
            const keMidX = (x + keX) / 2;
            const keMidY = (y + keY) / 2;

            if (idx % 2 === 0) {            
                ctx.fillText('ÂÖã‚Üí', keMidX, keMidY);
            }
        });
        
        const upperWuxing = BAGUA_CONFIG[this.selectedUpper].wuxing;
        const lowerWuxing = BAGUA_CONFIG[this.selectedLower].wuxing;
        ctx.fillStyle = textColor;
        ctx.font = 'bold 16px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText(`‰∏äÂç¶Ôºö${upperWuxing}  ‰∏ãÂç¶Ôºö${lowerWuxing}`, centerX, height - 20);
    },
    
    drawChangshengChart() {
        const canvas = document.getElementById('changshengCanvas');
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;
        const padding = 50;
        
        ctx.clearRect(0, 0, width, height);
        
        const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
        const textColor = isDark ? '#E6E0E9' : '#1D1B20';
        const lineColor = isDark ? '#D0BCFF' : '#6750A4';
        
        const points = [
            { x: 0, y: 0.2, label: 'ÈïøÁîü' },
            { x: 1, y: 0.4, label: 'Ê≤êÊµ¥' },
            { x: 2, y: 0.6, label: 'ÂÜ†Â∏¶' },
            { x: 3, y: 0.8, label: '‰∏¥ÂÆò' },
            { x: 4, y: 1.0, label: 'Â∏ùÊó∫' },
            { x: 5, y: 0.8, label: 'Ë°∞' },
            { x: 6, y: 0.6, label: 'ÁóÖ' },
            { x: 7, y: 0.4, label: 'Ê≠ª' },
            { x: 8, y: 0.3, label: 'Â¢ì' },
            { x: 9, y: 0.1, label: 'Áªù' },
            { x: 10, y: 0.15, label: 'ËÉé' },
            { x: 11, y: 0.18, label: 'ÂÖª' }
        ];
        
        const chartWidth = width - padding * 2;
        const chartHeight = height - padding * 2;
        const stepX = chartWidth / 11;
        
        ctx.strokeStyle = lineColor;
        ctx.lineWidth = 3;
        ctx.beginPath();
        points.forEach((point, i) => {
            const x = padding + point.x * stepX;
            const y = height - padding - point.y * chartHeight;
            if (i === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
        });
        ctx.stroke();
        
        ctx.fillStyle = lineColor;
        points.forEach(point => {
            const x = padding + point.x * stepX;
            const y = height - padding - point.y * chartHeight;
            
            ctx.beginPath();
            ctx.arc(x, y, 5, 0, 2 * Math.PI);
            ctx.fill();
            
            ctx.fillStyle = textColor;
            ctx.font = '14px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText(point.label, x, height - padding + 20);
            ctx.fillStyle = lineColor;
        });
        
        ctx.fillStyle = textColor;
        ctx.font = 'bold 16px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('‰∫îË°åÂçÅ‰∫åÈïøÁîüÊõ≤Á∫øÂõæ', width / 2, 30);
    },
    
    updateHexagram() {
        this.drawHexagram();
    },
    
    downloadHexagram() {
        const showXiangyi = document.getElementById('showXiangyi')?.checked;
        const showXiantian = document.getElementById('showXiantian')?.checked;
        const showHoutian = document.getElementById('showHoutian')?.checked;
        
        if (showXiangyi || showXiantian || showHoutian) {
            this.downloadCard();
        } else {
            this.downloadSimple();
        }
    },
    
    downloadSimple() {
        const canvas = document.getElementById('hexagramCanvas');
        const format = document.getElementById('downloadFormat')?.value ?? 'png';
        const upperLines = BAGUA_CONFIG[this.selectedUpper].lines;
        const lowerLines = BAGUA_CONFIG[this.selectedLower].lines;
        const hexagramKey = [...upperLines, ...lowerLines].join('');
        const hexagram = HEXAGRAM_DATA[hexagramKey];
        const name = hexagram ? hexagram.name : 'ÂÖ´Âç¶';
        
        const link = document.createElement('a');
        link.download = `${name}.${format}`;
        
        if (format === 'png') {
            link.href = canvas.toDataURL('image/png');
        } else if (format === 'jpeg') {
            link.href = canvas.toDataURL('image/jpeg', 0.95);
        } else if (format === 'webp') {
            link.href = canvas.toDataURL('image/webp', 0.95);
        }
        
        link.click();
    },
    
    downloadCard() {
        const cardCanvas = document.createElement('canvas');
        cardCanvas.width = 600;
        cardCanvas.height = 900;
        const ctx = cardCanvas.getContext('2d');
        
        const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
        ctx.fillStyle = isDark ? '#1E1E1E' : '#FFFFFF';
        ctx.fillRect(0, 0, cardCanvas.width, cardCanvas.height);
        
        ctx.strokeStyle = isDark ? '#D0BCFF' : '#6750A4';
        ctx.lineWidth = 3;
        ctx.strokeRect(10, 10, cardCanvas.width - 20, cardCanvas.height - 20);
        
        const textColor = isDark ? '#E6E0E9' : '#1D1B20';
        const upperLines = BAGUA_CONFIG[this.selectedUpper].lines;
        const lowerLines = BAGUA_CONFIG[this.selectedLower].lines;
        const hexagramKey = [...upperLines, ...lowerLines].join('');
        const hexagram = HEXAGRAM_DATA[hexagramKey];
        
        ctx.fillStyle = textColor;
        ctx.font = 'bold 32px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText(hexagram ? hexagram.name : 'Êú™Áü•Âç¶', cardCanvas.width / 2, 60);
        
        const miniCanvas = document.getElementById('hexagramCanvas');
        ctx.drawImage(miniCanvas, 150, 80, 300, 450);
        
        let yPos = 560;
        ctx.font = '16px sans-serif';
        ctx.textAlign = 'left';
        
        if (document.getElementById('showXiangyi')?.checked) {
            ctx.fillText(`Ë±°ÊÑè: ${BAGUA_CONFIG[this.selectedUpper].nature}${BAGUA_CONFIG[this.selectedLower].nature}`, 40, yPos);
            yPos += 30;
        }
        
        if (document.getElementById('showXiantian')?.checked) {
            ctx.fillText(`ÂÖàÂ§©‰ΩçÁΩÆ: ‰∏äÂç¶-${BAGUA_CONFIG[this.selectedUpper].xiantian} ‰∏ãÂç¶-${BAGUA_CONFIG[this.selectedLower].xiantian}`, 40, yPos);
            yPos += 30;
        }
        
        if (document.getElementById('showHoutian')?.checked) {
            ctx.fillText(`ÂêéÂ§©‰ΩçÁΩÆ: ‰∏äÂç¶-${BAGUA_CONFIG[this.selectedUpper].houtian} ‰∏ãÂç¶-${BAGUA_CONFIG[this.selectedLower].houtian}`, 40, yPos);
            yPos += 30;
        }
        
        const upperDizhi = BAGUA_CONFIG[this.selectedUpper].dizhiUpper;
        const lowerDizhi = BAGUA_CONFIG[this.selectedLower].dizhiLower;
        ctx.fillText(`Âú∞ÊîØ: ‰∏äÂç¶-${upperDizhi.join('')} ‰∏ãÂç¶-${lowerDizhi.join('')}`, 40, yPos);
        yPos += 30;
        
        ctx.fillText(`‰∫îË°å: ‰∏äÂç¶-${BAGUA_CONFIG[this.selectedUpper].wuxing} ‰∏ãÂç¶-${BAGUA_CONFIG[this.selectedLower].wuxing}`, 40, yPos);
        
        const format = document.getElementById('downloadFormat')?.value ?? 'png';
        const link = document.createElement('a');
        link.download = `${hexagram ? hexagram.name : 'ÂÖ´Âç¶'}-Âç°Áâá.${format}`;
        
        if (format === 'png') {
            link.href = cardCanvas.toDataURL('image/png');
        } else if (format === 'jpeg') {
            link.href = cardCanvas.toDataURL('image/jpeg', 0.95);
        } else if (format === 'webp') {
            link.href = cardCanvas.toDataURL('image/webp', 0.95);
        }
        
        link.click();
    },
    
    getWuxingColor(wuxing) {
        const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
        const colors = {
            'Êú®': isDark ? '#4CAF50' : '#2D5016',
            'ÁÅ´': isDark ? '#FF5252' : '#D32F2F',
            'Âúü': isDark ? '#FF9800' : '#F57C00',
            'Èáë': '#FFD700',
            'Ê∞¥': isDark ? '#2196F3' : '#1976D2'
        };
        return colors[wuxing] || '#000000';
    },
    
    getWuxingClass(wuxing) {
        const map = { 'Êú®': 'wood', 'ÁÅ´': 'fire', 'Âúü': 'earth', 'Èáë': 'metal', 'Ê∞¥': 'water' };
        return map[wuxing];
    },
    
    getWuxingRelation(w1, w2) {
        const relations = {
            'Êú®Êú®': 'ÊØîÂíå', 'Êú®ÁÅ´': 'Áõ∏Áîü', 'Êú®Âúü': 'Áõ∏ÂÖã', 'Êú®Èáë': 'Ë¢´ÂÖã', 'Êú®Ê∞¥': 'Ë¢´Áîü',
            'ÁÅ´Êú®': 'Ë¢´Áîü', 'ÁÅ´ÁÅ´': 'ÊØîÂíå', 'ÁÅ´Âúü': 'Áõ∏Áîü', 'ÁÅ´Èáë': 'Áõ∏ÂÖã', 'ÁÅ´Ê∞¥': 'Ë¢´ÂÖã',
            'ÂúüÊú®': 'Ë¢´ÂÖã', 'ÂúüÁÅ´': 'Ë¢´Áîü', 'ÂúüÂúü': 'ÊØîÂíå', 'ÂúüÈáë': 'Áõ∏Áîü', 'ÂúüÊ∞¥': 'Áõ∏ÂÖã',
            'ÈáëÊú®': 'Áõ∏ÂÖã', 'ÈáëÁÅ´': 'Ë¢´ÂÖã', 'ÈáëÂúü': 'Ë¢´Áîü', 'ÈáëÈáë': 'ÊØîÂíå', 'ÈáëÊ∞¥': 'Áõ∏Áîü',
            'Ê∞¥Êú®': 'Áõ∏Áîü', 'Ê∞¥ÁÅ´': 'Áõ∏ÂÖã', 'Ê∞¥Âúü': 'Ë¢´ÂÖã', 'Ê∞¥Èáë': 'Ë¢´Áîü', 'Ê∞¥Ê∞¥': 'ÊØîÂíå'
        };
        return relations[w1 + w2] || 'Êú™Áü•';
    }
};

// ÂàùÂßãÂåñÂ∫îÁî®
window.addEventListener('DOMContentLoaded', () => {
    window.app.init();
});

// PWAÊîØÊåÅ
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('data:text/javascript,');
}
    </script>
</body>
</html>