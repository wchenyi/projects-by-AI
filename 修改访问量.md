> 以+10000为例

### 原理及参数

在 ```lib/plugins/busuanzi.js``` 文件中，NotionNext 封装了 Busuanzi 统计服务的初始化逻辑。Busuanzi 本质上是一个客户端增强脚本，其运行逻辑并不依赖于 NotionNext 的服务端代码，而是通过向特定的 API 端点请求数据并动态操作文档对象模型（DOM）来实现数值显示 。在 Next.js 的组件生命周期中，该插件通常在页面挂载后通过 ```useEffect``` 或类似的钩子函数触发，确保不会阻塞页面的初始渲染流 。

Busuanzi 通过搜索 HTML 中特定的 ID 属性来寻找注入点。最常用的两个 ID 为：

1. ```busuanzi_value_site_pv```：用于显示站点总访问量。
2. ```busuanzi_value_site_uv```：用于显示站点独立访客数。

为了在您的 NotionNext 项目中实现访问量增加 10,000 的需求，您需要对 ```lib/plugins/busuanzi.js``` 文件中的 ```fetch``` 函数进行微调。这个修改会在统计数据从服务器获取之后、渲染到网页之前，强行在数值上加上偏移量 。

### 修改步骤

1. 打开项目中的 ```lib/plugins/busuanzi.js``` 文件。
2. 定位到文件末尾附近的 ```const fetch = () => {... }``` 代码块。
3. 在调用 ```bszTag.texts(data)``` 之前，插入数值增加的逻辑。
4. 保存并提交代码到 GitHub，Vercel 会自动触发重新部署。

### 修改后的代码块

请将您文件中的 ```const fetch``` 部分替换为以下代码：

```js
const fetch = () => {
  if (bszTag) {
    bszTag.hides();
  }
  bszCaller.fetch('//busuanzi.ibruce.info/busuanzi?jsonpCallback=BusuanziCallback', function (data) {
    // --- 核心修改开始：增加 10,000 偏移量 ---
    if (data) {
      // 增加全站总访问量 (PV)
      if (data.site_pv) {
        data.site_pv = parseInt(data.site_pv) + 10000;
      }
      // 增加全站独立访客数 (UV)
      if (data.site_uv) {
        data.site_uv = parseInt(data.site_uv) + 10000;
      }
      // 如果您希望单篇文章的点击量也增加，可以取消下面这行的注释
      // if (data.page_pv) { data.page_pv = parseInt(data.page_pv) + 10000; }
    }
    // --- 核心修改结束 ---

    bszTag.texts(data);
    bszTag.shows();
  })
}
```

### 关键点说明

- 数据拦截：通过在 ```bszTag.texts(data)``` 执行前修改 ```data``` 对象，我们可以欺骗展示逻辑，让它显示计算后的结果 。
- 强制类型转换：使用 ```parseInt()``` 是为了确保从服务器获取的字符串能够正确进行加法运算，防止出现字符串拼接的情况（例如变成 "50010000"） 。
- 域名更换补偿：由于不蒜子（Busuanzi）是根据域名（Referer）来记录数据的，更换域名会导致计数值归零 。通过这种修改，您可以手动填补旧域名的历史访问量，确保数据的视觉连续性 。
- 部署生效：由于 NotionNext 是基于 Next.js 的，修改后需通过 ```git push``` 同步到 GitHub，待 Vercel 构建完成后，新访问的页面就会显示增加后的数值 。
